Customisations
==============

One of the primary purposes of this library is to be flexible enough so it can be customised to many needs.

Customising Migration Behavior
------------------------------

As indicated in the :ref:`Timeline Constructor <timeline-constructor>` section, a Timeline can receive a
``MigrationBus`` as an optional parameter. The Middleware attached to that bus will be used to execute each individual
migration, which means behaviors can easily be customised if needed.

The default migration bus and its middleware stack is created by ``MigrationBusFactory`` and is very simple:

.. code-block:: php

    new MigrationBus([
        new SetOptionsMiddleware(),
        new TransactionMiddleware(),
        new MigrateHandler(),
    ]);

You can override the default ``MigrationBus`` by simply passing a new one as a parameter for the Timeline's constructor.

Creating your own middleware is easy too: just create a new class that extends ``AbstractMiddleware``. See any of the
default classes for an example of what middleware can do.

The CommandBus library used by Baleen is `Tactician <http://tactician.thephpleague.com/>`_.
